# 网易云音乐工具集

## 简介
这是一个功能丰富的网易云音乐工具集，整合了歌单导出、本地音乐搜索、NCM文件解密以及音乐文件排序等实用功能，帮助您更好地管理网易云音乐资源。

## 功能特点
本工具集提供以下主要功能：

1. **歌单导出**：将网易云音乐歌单导出为JSON文件，保存歌曲信息
2. **本地音乐搜索**：根据导出的歌单在本地查找匹配的音乐文件，支持模糊匹配
3. **NCM文件解密**：将网易云音乐的NCM格式文件转换为标准MP3或FLAC格式
4. **音乐文件排序**：对文件夹中的音乐文件进行编号或清除编号，方便管理

## 安装要求
- Python 3.6+ 环境
- 依赖库：
  - pyncm (用于网易云API访问)
  - 其他标准库（os, json, shutil, re等）

## 安装方法
1. 克隆或下载本仓库
2. 安装必要的依赖：
```
pip install pyncm
```
3. 确保`libncmdump.dll`在程序目录下（用于NCM文件解密）

注意：由于GitHub限制，仓库中不包含`libncmdump.dll`文件，需要自行准备并放置在程序目录下。

## 使用方法

### 基本使用
直接运行主程序：
```
python main.py
```

### 功能使用说明

#### 1. 歌单导出
- 输入网易云音乐歌单ID或链接
- 程序会自动提取歌单信息，将其保存为JSON文件
- 默认保存在`jsonlist`目录下

#### 2. 本地音乐搜索
- 选择已导出的歌单JSON文件或手动输入路径
- 输入本地音乐目录（默认为`F:\CloudMusic`）
- 选择是否使用模糊匹配
- 程序会自动搜索匹配的音乐文件，并复制到`Myplaylist\歌单名称`目录
- 如发现NCM格式文件，会自动解密

#### 3. NCM文件解密
- 输入NCM文件或包含NCM文件的目录路径
- 选择输出目录（留空则使用源文件目录）
- 选择是否删除原NCM文件
- 程序会自动将NCM文件转换为MP3或FLAC格式

#### 4. 音乐文件排序
- 选择需要排序的歌单文件夹
- 选择对文件进行编号或清除编号
- 如选择编号，需输入末尾编号（程序会自动计算前面的编号）

## 配置选项
程序会自动加载同目录下的`config.json`文件，可设置以下配置：
- `default_music_dir`：默认本地音乐目录
- `jsonlist_dir`：歌单JSON文件保存目录
- `playlist_dir`：歌单音乐文件复制目标目录
- `dll_path`：NCM解密DLL文件路径

## 文件夹结构
- `main.py`：主控制程序
- `ncm_music_infor_output.py`：歌单导出模块
- `find_local_music.py`：本地音乐搜索模块
- `ncmdump.py`：NCM文件解密模块
- `sortlist.py`：音乐文件排序模块
- `libncmdump.dll`：NCM文件解密必需的DLL文件
- `jsonlist/`：存放导出的歌单JSON文件
- `Myplaylist/`：存放根据歌单匹配的本地音乐文件

## 常见问题

### 无法解密NCM文件
确保`libncmdump.dll`文件在程序目录下，或在配置文件中指定正确的路径。

### 无法匹配本地音乐
- 检查本地音乐目录路径是否正确
- 尝试使用模糊匹配功能
- 确认文件名中包含歌曲名和歌手名

### 歌单ID提取失败
确保输入的是正确的网易云音乐歌单链接或ID，程序支持多种链接格式。

## 作者
Xpercent-YX

## 许可证
开源软件，仅供学习交流使用。

## 声明
本工具仅用于个人学习和研究，请勿用于任何商业用途。使用本工具处理音乐文件时，请遵守相关法律法规，尊重音乐版权。